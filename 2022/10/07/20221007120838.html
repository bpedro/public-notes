<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <title>Public note - Bruno Pedro</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="404 Page not found">
  <meta name="keywords" content>
  <meta name="author" content="Bruno Pedro">
  <meta name="google-site-verification" content="TanZBlli7Qu3sYIVQ2ttX4rVh4LTZd71quDTm54UHIA">
  <link rel="canonical" href="https://brunopedro.com/404.html">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="website">
  <meta property="og:title" content="404 Page not found - Bruno Pedro">
  <meta property="og:url" content="https://brunopedro.com/404.html">
  <meta property="og:site_name" content="Bruno Pedro">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="404 Page not found - Bruno Pedro">
  <meta name="twitter:site" content="@bpedro">
  <meta name="twitter:creator" content="@bpedro">
  <link rel="icon" type="image/png" href="https://brunopedro.com/media/brunopedro_favicon-94918278cc.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://brunopedro.com/css/styles-2d36e5c7bd.css">
  <script
    type="application/ld+json">{"@context":"http://schema.org","@type":"Person","name":"Bruno Pedro","url":"https:\/\/brunopedro.com","sameAs":["https://twitter.com/bpedro","https://github.com/bpedro","https://www.linkedin.com/in/bpedro"]}</script>
</head>
<body>
<section id="main">
  <div>
    <h1 id="title">Public note</h1>
  </div>
  <div id="layout">
    <blockquote>
    <p>With a major version bump and an acceptance of breaking changes
    from OpenAPI 3.x, I’d like to propose moving from JSON object
    structures to JSON array structures.</p>
    </blockquote>
    <hr />
    <p>Found on <a
    href="https://github.com/OAI/moonwalk/discussions/32">Consideration
    for moving from objects to arrays. · Discussion #32 ·
    OAImoonwalk</a> on 2022-10-07 12:08:38.</p>
    <p>Tags: #openapi #openapiv4 #v4 #discussion #specification
    #api-specification</p>
    <hr />
    <p>I don’t necessarily agree with this proposal. The following is
    the comment I left on the discussion mentioned above.</p>
    <h1 id="comment">Comment</h1>
    <p>I believe this proposal is interesting, however it creates a
    tradeoff between the importance of running query filters on
    user-provided keys and accessing individual elements.</p>
    <p>Let’s start by analyzing the motivation behind this proposal.
    According to the author, the goal of the proposed change is to
    <strong>make it easier for API practitioners to work with the data
    represented by OpenAPI definitions</strong>.</p>
    <blockquote>
    <p>Specifically, running query filters on names in JSON name-value
    pairs is difficult for lots of tooling (…)</p>
    </blockquote>
    <p>The examples <a
    href="https://github.com/OAI/moonwalk/discussions/32#discussioncomment-3818053">provided</a>
    to obtain all the paths that contain the word “pets” make sense. You
    can clearly see that using JSON object structures makes it harder to
    obtain all the elements where their keys contain a given string.</p>
    <p>On the other hand, accessing <strong>individual</strong> elements
    <strong>becomes more difficult</strong> after the proposed changes.
    Let’s take the <code>/pets</code> path as an example and see how
    accessing it directly looks like with JSON object structures versus
    JSON array structures, using different methods.</p>
    <table>
    <colgroup>
    <col style="width: 33%" />
    <col style="width: 33%" />
    <col style="width: 33%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th>Method</th>
    <th>JSON object structures</th>
    <th>JSON array structures</th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td><strong>M1</strong>: <code>jq</code>, using
    <code>api.json</code> as the API definition document</td>
    <td><code>jq '.paths \| .["/pets"]' &lt; api.json</code></td>
    <td><code>jq '.paths[] \| select(.name=="/pets")'&lt; api.json</code></td>
    </tr>
    <tr class="even">
    <td><strong>M2</strong>: JavaScript, using <code>api</code> as the
    object holding the API definition</td>
    <td><code>api.paths['/pets']</code></td>
    <td><code>api.paths.find(path =&gt; path.name == '/pets')</code></td>
    </tr>
    <tr class="odd">
    <td><strong>M3</strong>: Python, using <code>api</code> as the</td>
    <td><code>api['paths']['/pets']</code></td>
    <td><code>[path for path in api['paths'] if path['name']=='/pets'][0]</code></td>
    </tr>
    </tbody>
    </table>
    <p>While <strong>M1</strong> doesn’t convey the big difference in
    effort when using <code>jq</code>, if you look at the other methods,
    you will immediately see that there is a degree of difficulty
    introduced when looking up elements on array structures. Object
    structures can be easily referenced by their keys in most
    programming languages, while array structures can’t be referenced by
    the value of arbitrary keys.</p>
    <p>The value of this proposal is, in my opinion, affected by the
    importance of how you want to read information from an OpenAPI
    definition. If you feel it’s more important to easily filter
    name-value pairs, then JSON array structures seem to be the
    appropriate solution. If, on the other hand, you want to access
    individual elements as easily as possible, then JSON object
    structures are the preferred solution.</p>
  </div>
</section>
<footer class="page-footer">
  <hr>
  <ul class="page-footer-menu">
    <li><a href="https://github.com/bpedro" rel="me"><i class="fa fa-github fa-2x"></i></a></li>
    <li><a href="https://www.linkedin.com/in/bpedro" rel="me"><i class="fa fa-linkedin fa-2x"></i></a></li>
    <li><a href="https://twitter.com/bpedro" rel="me"><i class="fa fa-twitter fa-2x"></i></a></li>
  </ul>
  <div class="copyright">
    <p>&copy; 2002—2022 Bruno Pedro. All rights reserved.</p>
  </div>
</footer>
</body>
</html>